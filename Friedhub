-- ‚ö° Fried Hub (FF2 - Stealthy Auto Catch + Keybind Tackle + Purple Ball)
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "Fried Hub - FF2",
    LoadingTitle = "Fried Hub Loading",
    LoadingSubtitle = "Auto Catch, Tackle Key, Hitbox, Purple Ball",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "FriedHub",
        FileName = "FF2Settings"
    },
    KeySystem = false
})

-- üñ• Low Graphics Optimizer
for _, v in pairs(game:GetDescendants()) do
    pcall(function()
        if v:IsA("BasePart") then
            v.Material = Enum.Material.SmoothPlastic
            v.Reflectance = 0
            v.CastShadow = false
        elseif v:IsA("Decal") or v:IsA("Texture") then
            v:Destroy()
        elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
            v.Enabled = false
        end
    end)
end

local lighting = game:GetService("Lighting")
lighting.FogEnd = 1e9
lighting.GlobalShadows = false
lighting.Brightness = 1
lighting.OutdoorAmbient = Color3.new(0.5, 0.5, 0.5)

-- üîß Vars
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local lp = Players.LocalPlayer

local magnet, hitbox, autocatch = false, false, false
local magnetRange, tackleRange = 60, 25
local tackleCooldown = false

-- üåê GUI
local Tab = Window:CreateTab("‚öôÔ∏è Main", Color3.fromRGB(255, 255, 0))

Tab:CreateToggle({
    Name = "Auto Catch",
    CurrentValue = false,
    Callback = function(v) autocatch = v end
})

Tab:CreateToggle({
    Name = "Magnet (Safe)",
    CurrentValue = false,
    Callback = function(v) magnet = v end
})

Tab:CreateSlider({
    Name = "Magnet Range",
    Range = {1, 80},
    Increment = 1,
    CurrentValue = 60,
    Callback = function(v) magnetRange = v end
})

Tab:CreateToggle({
    Name = "Ball Hitbox",
    CurrentValue = false,
    Callback = function(v) hitbox = v end
})

Tab:CreateSlider({
    Name = "Tackle Keybind Range",
    Range = {10, 50},
    Increment = 1,
    CurrentValue = 25,
    Callback = function(v) tackleRange = v end
})

-- üîâ Create Hit Sound
local function playHitSound()
    local sound = Instance.new("Sound", workspace)
    sound.SoundId = "rbxassetid://12222225" -- Roblox hit sound
    sound.Volume = 2
    sound:Play()
    game.Debris:AddItem(sound, 2)
end

-- ü§∏‚Äç‚ôÇÔ∏è Safe Tackle Dash Function
local function safeTackle(target)
    local hrp = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
    local phrp = target.Character and target.Character:FindFirstChild("HumanoidRootPart")
    if hrp and phrp then
        local dir = (phrp.Position - hrp.Position).Unit
        local behind = phrp.Position - (dir * 3) + Vector3.new(0, 1.5, 0)
        hrp.CFrame = CFrame.new(behind)
        playHitSound()
    end
end

-- üß† Get Hand
local function getHand()
    local c = lp.Character
    return c and (c:FindFirstChild("RightHand") or c:FindFirstChild("Right Arm") or c:FindFirstChild("HumanoidRootPart"))
end

-- ‚å®Ô∏è Keybind Detection for "R" Tackle
UserInputService.InputBegan:Connect(function(input, gpe)
    if gpe then return end
    if input.KeyCode == Enum.KeyCode.R and not tackleCooldown then
        tackleCooldown = true
        local nearest = nil
        local shortest = tackleRange
        for _, plr in pairs(Players:GetPlayers()) do
            if plr ~= lp and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                local dist = (lp.Character.HumanoidRootPart.Position - plr.Character.HumanoidRootPart.Position).Magnitude
                if dist <= shortest then
                    shortest = dist
                    nearest = plr
                end
            end
        end
        if nearest then safeTackle(nearest) end
        task.delay(1, function() tackleCooldown = false end) -- 1s cooldown
    end
end)

-- üí° Main Logic
RunService.Heartbeat:Connect(function()
    local ball = workspace:FindFirstChild("Football")
    local hand = getHand()

    -- Stealthy Auto Catch (smooth lerp with tiny random jitter)
    if autocatch and ball and hand then
        local dist = (ball.Position - hand.Position).Magnitude
        if dist <= 50 then -- smaller range to reduce detection
            pcall(function()
                local targetPos = hand.Position + Vector3.new(math.random(-5,5)*0.01, math.random(-5,5)*0.01, math.random(-5,5)*0.01)
                local newPos = ball.Position:Lerp(targetPos, 0.25)
                ball.Velocity = Vector3.new(0, 0, 0)
                ball.CFrame = CFrame.new(newPos)
            end)
        end
    end

    -- Magnet (safe snap)
    if magnet and ball and hand then
        local dist = (ball.Position - hand.Position).Magnitude
        if dist <= magnetRange then
            pcall(function()
                ball.CFrame = hand.CFrame
            end)
        end
    end

    -- Ball color and glow effect (purple)
    if ball then
        pcall(function()
            ball.BrickColor = BrickColor.new("Royal purple")
            ball.Material = Enum.Material.Neon

            -- Add PointLight for glow if it doesn't exist
            if not ball:FindFirstChildOfClass("PointLight") then
                local light = Instance.new("PointLight")
                light.Color = Color3.fromRGB(128, 0, 128)
                light.Brightness = 1
                light.Range = 10
                light.Parent = ball
            end
        end)
    end

    -- Hitbox enlarger
    if hitbox and ball then
        pcall(function()
            ball.Size = Vector3.new(8, 8, 8)
            ball.CanCollide = false
            ball.Transparency = 0.2
        end)
    elseif ball then
        ball.Size = Vector3.new(3, 3, 3)
        ball.Transparency = 0
    end
end)
